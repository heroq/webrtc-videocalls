<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/static/main.css">
</head>
<body>
<div class="container bootstrap snippets bootdey">
    <div class="col-md-8 col-sm-12 col-xs-12">
        <div class="row">
            <div class="col-md-12">
                <div class="widget-box">
                    <div class="widget-header bordered-bottom bordered-themesecondary">
                        <i class="widget-icon fa fa-tags themesecondary"></i>
                        <h5 class="widget-caption themesecondary">Room List</h5>
                    </div><!--Widget Header-->
                    <div class="widget-body">
                        <div class="widget-main no-padding">
                            <div class="tickets-container">
                                <ul class="tickets-list" id="list">

                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    (function() {
        /* 통신에 사용 될 XMLHttpRequest 객체 정의 */
        httpRequest = new XMLHttpRequest();
        /* httpRequest의 readyState가 변화했을때 함수 실행 */
        httpRequest.onreadystatechange = () => {
            /* readyState가 Done이고 응답 값이 200일 때, 받아온 response로 name과 age를 그려줌 */
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
                if (httpRequest.status === 200) {
                    const result = httpRequest.response;
                    console.log(result);
                    result.forEach(element => {
                        document.querySelector("#list").insertAdjacentHTML(
                            "afterbegin",
                            `<li class="ticket-item">
                                <div class="row">
                                    <div class="col-md-6 col-sm-12">
                                        ${element}
                                    </div>
                                </div>
                            </li>
                        `);
                    })
                } else {
                    alert('Request Error!');
                }
            }
        };
        /* Get 방식으로 name 파라미터와 함께 요청 */
        httpRequest.open('GET', '/room/get');
        /* Response Type을 Json으로 사전 정의 */
        httpRequest.responseType = "json";
        /* 정의된 서버에 요청을 전송 */
        httpRequest.send();
    })();
</script>
</html>